<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="BidMapper">

	<resultMap type="com.project.model.dto.MemberDTO" id="loginResultMap">
	
		<id property = "userID" column = "USER_ID"/>
		<id property = "userPWD" column = "USER_PWD"/>
		
		<result property = "userName" column = "USER_NAME"/>
		<result property = "userEmail" column = "USER_EMAIL"/>
		<result property = "userAge" column = "USER_AGE"/>
		<result property = "userGender" column = "USER_GENDER"/>
		<result property = "userEmail" column = "USER_EMAIL"/>
		<result property = "userAddress" column = "USER_ADDRESS"/>
		<result property = "userPhone" column = "USER_PHONE"/>
		<result property = "memberStatus" column = "MEMBER_STATUS"/>
		<result property = "mcStatus" column = "MC_STATUS"/>
		<result property = "enrollDate" column = "ENROLL_DATE"/>
		<result property = "adminStatus" column = "ADMIN_STATUS"/>
	
	</resultMap>
	
	<select id= "login" parameterType="com.project.model.dto.MemberDTO" resultMap = "loginResultMap">

		SELECT DISTINCT
		*
		FROM BID_USER
		WHERE USER_ID = #{userID}
	</select>
	
	<select id= "findMemberID" parameterType="com.project.model.dto.MemberDTO" resultMap = "loginResultMap">

			SELECT DISTINCT
			*
			FROM BID_USER
			WHERE USER_ID = #{userID}
	</select>
	
	<select id= "findMembreName" parameterType="com.project.model.dto.MemberDTO" resultMap = "loginResultMap">

			SELECT DISTINCT
			*
			FROM BID_USER
			WHERE USER_NAME LIKE #{userName}
	</select>
	
	<select id= "findMemberEmail" parameterType="com.project.model.dto.MemberDTO" resultMap = "loginResultMap">

			SELECT DISTINCT
			*
			FROM BID_USER
			WHERE USER_EMAIL = #{userEmail}
	</select>


	<delete id= "deleteMember" parameterType="com.project.model.dto.MemberDTO">

			DELETE
			FROM BID_USER
			WHERE USER_ID = #{userID}
	</delete>

	<select id= "selectAllMember" parameterType="com.project.model.dto.MemberDTO" resultMap = "loginResultMap">

		SELECT DISTINCT
		*
		FROM BID_USER
		WHERE USER_ID NOT IN ('admin')

	</select>

	<!-- 회원 정보 입력 -->
	<insert id="signUp"
		parameterType="com.project.model.dto.MemberDTO">
		INSERT
			INTO BID_USER A
		(
		  A.USER_ID
		, A.USER_PWD
		, A.USER_NAME
		, A.USER_AGE
        , A.USER_GENDER
        , A.USER_EMAIL
		, A.USER_ADDRESS
		, A.USER_PHONE
		)
		VALUES
		(
		  #{ userID }
		, #{ userPWD }
		, #{ userName }
		, #{ userAge }
		, #{ userGender }
		, #{ userEmail }
		, #{ userAddress }
		, #{ userPhone }
		)
	</insert>

	<update id="updateMemebr"
		parameterType="com.project.model.dto.MemberDTO">
		UPDATE
			BID_USER A
		SET 
		  A.USER_NAME = #{ userName }
		, A.USER_PWD = #{ userPWD }
		, A.USER_EMAIL = #{ userEmail }
		, A.USER_PHONE = #{ userPhone }
		, A.USER_ADDRESS = #{ userAddress }
		WHERE A.USER_ID = #{ userID}
	</update>

	<delete id="deleteMemberMe"
		parameterType="com.project.model.dto.MemberDTO">
		DELETE
		FROM BID_USER A
		WHERE A.USER_ID = #{ userID }
	</delete>

	

</mapper>